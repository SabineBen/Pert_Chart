<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>creation des projets</title>
    <link rel="stylesheet" href="../css/style1.css">
    <style>
        html,
        body,
        #container {

            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>

    <form class="form">
        <div id="container">
            <label for="">project</label>


            <head>
                <title>Dynamically </title>
                <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-core.min.js"
                    type="text/javascript"></script>
                <script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-pert.min.js"
                    type="text/javascript"></script>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"
                    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>


                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.0.1/tailwind.min.css">

                <!-- Fontawesome Link -->
                <link href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" rel="stylesheet">



                <!-- Fontawesome Link -->
            </head>

            <body>

                <table id='tbl'>
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Duré</th>
                            <th>Taches prédécesseurs</th>
                            <th>Taches successeur</th>
                        </tr>
                    </thead>
                    <tbody>
                        <div class="inputs">
                            <div>
                                <tr class="tache">
                                    <td><input type='text' name='tache' id="input"></td>
                                    <td><input type='number' name='duree' id="inpt"></td>
                                    <td><input type='text' name='precedante' id="inputs"></td>
                                    <td><input type='text' name='precedante' id="inputss"></td>
                                    <td> <button class=" rmv bg-red-500 text-white px-2 py-1 rounded-sm" type="submit">
                                            <i class="fas fa-trash"></i></button></td>
                                </tr>
                                <tr>
                                    <td><input type='text' name='tache' id="input1"></td>
                                    <td><input type='number' name='duree' id="inpt1"></td>
                                    <td><input type='text' name='precedante' id="inputs1"></td>
                                    <td><input type='text' name='precedante' id="inputss1"></td>
                                    <td> <button class=" rmv bg-red-500 text-white px-2 py-1 rounded-sm" type="submit">
                                            <i class="fas fa-trash"></i></button></td>

                                </tr>
                                <tr>
                                    <td><input type='text' name='tache' id="input2"></td>
                                    <td><input type='number' name='duree' id="inpt2"></td>
                                    <td><input type='text' name='precedante' id="inputs2"></td>
                                    <td><input type='text' name='precedante' id="inputss2"></td>
                                    <td> <button class=" rmv bg-red-500 text-white px-2 py-1 rounded-sm" type="submit">
                                            <i class="fas fa-trash"></i></button></td>
                                </tr>
                                <tr>
                                    <td><input type='text' name='tache' id="input3"></td>
                                    <td><input type='number' name='duree' id="inpt3"></td>
                                    <td><input type='text' name='precedante' id="inputs3"></td>
                                    <td><input type='text' name='precedante' id="inputss3"></td>
                                    <td> <button class=" rmv bg-red-500 text-white px-2 py-1 rounded-sm" type="submit">
                                            <i class="fas fa-trash"></i></button></td>

                                </tr>
                                <tr>
                                    <td><input type='text' name='tache' id="input4"></td>
                                    <td><input type='number' name='duree' id="inpt4"></td>
                                    <td><input type='text' name='precedante' id="inputs4"></td>
                                    <td><input type='text' name='precedante' id="inputss4"></td>
                                    <td> <button class=" rmv bg-red-500 text-white px-2 py-1 rounded-sm" type="submit">
                                            <i class="fas fa-trash"></i></button></td>

                                </tr>
                                <tr>
                                    <td><input type='text' name='tache' id="input5"></td>
                                    <td><input type='number' name='duree' id="inpt5"></td>
                                    <td><input type='text' name='precedante' id="inputs5"></td>
                                    <td><input type='text' name='precedante' id="inputss5"></td>
                                    <td> <button class=" rmv bg-red-500 text-white px-2 py-1 rounded-sm" type="submit">
                                            <i class="fas fa-trash"></i></button></td>

                                </tr>


                            </div>
                        </div>

                    </tbody>


                </table>

                <input class="btn" type='button' value='Add new tache' id='add_row'>
                <button type="submit" class="btnc">create</button>
        </div>
    </form>


    <script>

        showResult();

        function showResult() {
            const form = document.querySelector('form');
            form.addEventListener('submit', (e) => {
                e.preventDefault(); // Prevent HTML refresh
                const formData = new FormData(form); // Converts to array of arrays
                const obj = Object.fromEntries(formData); // Array of arrays to object

                anychart.onDocumentReady(function () {

                    // data
                    var a = document.getElementById('input').value
                    var b = document.getElementById('inpt').value
                    var c = document.getElementById('inputs').value
                    var cs = document.getElementById('inputss').value

                    var a1 = document.getElementById('input1').value
                    var b1 = document.getElementById('inpt1').value
                    var c1 = document.getElementById('inputs1').value
                    var cs1 = document.getElementById('inputss1').value

                    var a2 = document.getElementById('input2').value
                    var b2 = document.getElementById('inpt2').value
                    var c2 = document.getElementById('inputs2').value
                    var cs2 = document.getElementById('inputss2').value

                    var a3 = document.getElementById('input3').value
                    var b3 = document.getElementById('inpt3').value
                    var c3 = document.getElementById('inputs3').value
                    var cs3 = document.getElementById('inputss3').value

                    var a4 = document.getElementById('input4').value
                    var b4 = document.getElementById('inpt4').value
                    var c4 = document.getElementById('inputs4').value
                    var cs4 = document.getElementById('inputss4').value

                    var a5 = document.getElementById('input5').value
                    var b5 = document.getElementById('inpt5').value
                    var c5 = document.getElementById('inputs5').value
                    var cs5 = document.getElementById('inputss5').value
                    data = [{
                        id: a,
                        duration: b,
                        name: c,
                        dependsOn: [cs],
                    }, {
                        id: a1,
                        duration: b1,
                        name: c1,
                        dependsOn: [cs1],

                    },
                    {
                        id: a2,
                        duration: b2,
                        name: c2,
                        dependsOn: [cs2],

                    }, {
                        id: a3,
                        duration: b3,
                        name: c3,
                        dependsOn: [cs2],
                    },
                    {
                        id: a4,
                        duration: b4,
                        name: c4,
                        dependsOn: [cs4],

                    },
                    {
                        id: a5,
                        duration: b5,
                        name: c5,


                    }]

                    // create a PERT chart
                    chart = anychart.pert();

                    // set chart data
                    chart.data(data, "asTable");

                    // set the title of the chart
                    chart.title("PERT Chart");

                    // set the container id for the chart
                    chart.container("container");

                    // initiate drawing the chart
                    chart.draw();
                });
            });

        }

        $(document).ready(function () {
            $("#add_row").click(function () {
                var row = "<tr> <td><input type='text' name='uname[]'></td><td><input type='text' name='uname[]'></td> <td><input type='text' name='age[]'></td><td><input type='text' name='precedante'></td><td> <button class='rmv bg-red-500 text-white px-2 py-1 rounded-sm' type='submit'>  <i class='fas fa-trash'></i></button></td>  </tr>";
                $("#tbl tbody").append(row);
            });

            $("body").on("click", ".rmv", function () {
                $(this).closest("tr").remove();
            });
        });
    </script>



</html>